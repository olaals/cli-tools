#!/usr/bin/env python3

import argparse
import http.server
import socketserver

def main():
    parser = argparse.ArgumentParser(description="Simple HTTP server with custom port")
    parser.add_argument("--port", type=int, default=8592, help="Port number for the server (default: 8592)")
    args = parser.parse_args()

    PORT = args.port

    class Handler(http.server.SimpleHTTPRequestHandler):
        def __init__(self, *args, **kwargs):
            super().__init__(*args, directory=".", **kwargs)

    class MyTCPServer(socketserver.TCPServer):
        allow_reuse_address = True

    with MyTCPServer(("127.0.0.1", PORT), Handler) as httpd:
        print("Serving at: http://localhost:{}".format(PORT))
        httpd.serve_forever()

if __name__ == "__main__":
    main()

